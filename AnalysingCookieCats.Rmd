---
title: "Analysing Cookie Cats"
author: "Pau, Mikel, Pablo"
date: "2022-11-15"
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
```


## 1. Getting to know the datasets
```{r, echo=FALSE}
DS=read.csv("cookie_cats_ABtest.csv")
PR=read.csv("cookie_cats_purch.csv")
str(DS)
str(PR)
```

# 2. Preprocessing
## 2.1 Preprocessing dataset “Cookie Cats AB Testing”
First, we will change all the values in retention_1 to TRUE or FALSE. Then, we will remove all the NA values in the dataset. We located an user with almost 50.000 rounds played, so we also removed them.
```{r, echo=FALSE}
DS$retention_1[DS$retention_1=="false "]="FALSE"
DS$retention_1[DS$retention_1=="  true "]="TRUE"
DS=DS[-c(which(DS$sum_gamerounds>3000)), ]
DS=na.omit(DS)
table(DS$retention_1)
```

## 2.2  Preprocessing dataset “Cookie Cats Purchases”
First, we will change all the negative values in purch to positive, and remove the EUR chars. Then, we will remove all the NA values in the dataset.
```{r, echo=FALSE}
PR$purch[PR$purch=="-2.29EUR"]="2.29EUR"
PR$purch[PR$purch=="-54.99EUR"]="54.99EUR"
PR$purch[PR$purch=="-10.99EUR"]="10.99EUR"
PR$purch[PR$purch=="-21.99EUR"]="21.99EUR"
PR$purch=gsub("[a-zA-Z]", "", PR$purch)
PR$purch=as.numeric(PR$purch)
PR=na.omit(PR)
table(PR$purch)
##sum(ds.pur$purch<0)
##ds.pur=ds.pur(ds.pur$purch<0, )
##sum(ds.pur$purch<0, na.rm=TRUE)
```

# 3. Descriptive analytics
## 3.1 Dataset “Cookie Cats AB Testing”
### 3.1.1 Users that downloaded the game
```{r, echo=FALSE}
nrow(DS)
```
### 3.1.2 Distribution of users in groups
```{r, echo=FALSE}
pie_labels=paste0(names(table(DS$version)), " = ", round(100*table(DS$version)/sum(table(DS$version)), 2), "%")
pie(table(DS$version), labels=pie_labels)
```
### 3.1.3 Game rounds
```{r, echo=FALSE}
boxplot(DS$sum_gamerounds[DS$version=="gate_30"$])
```

## 3.2 Dataset “Cookie Cats Purchases”
```{r, echo=FALSE}

```

# 4. Monetization metrics

# 5. A/B testing

# 6. Regression analysis
```{r, echo=FALSE}
##USAR LIBRERIA MERGE

```

# 7. Dashboard

# 8. Conclusion

# 9. Team contribution


# 10. Non-cheating manifesto



